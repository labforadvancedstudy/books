# Non-Lexical Lifetimes (NLL)

## Core Insight
NLL allows borrows to end when last used rather than at scope end, making the borrow checker understand actual data flow.

Before NLL (Rust 2015):
```rust
let mut x = 5;
let y = &x;      // Borrow starts
println!("{}", y);
// Borrow would last until end of scope
// x.push(6);    // ERROR even though y not used
} // Borrow ends here with lexical lifetimes
```

With NLL (Rust 2018+):
```rust
let mut x = vec![1, 2, 3];
let y = &x[0];           // Borrow starts
println!("{}", y);       // Last use of y
x.push(4);               // OK! Borrow ended at last use
```

NLL enables:
- More ergonomic code
- Fewer lifetime annotations
- Natural code patterns that were previously rejected
- Better error messages with span highlighting

The compiler performs data-flow analysis to track where borrows are actually live, not just lexically scoped.

## Connections
← [[006_borrow_checker]]
→ [[029_polonius]]
→ [[076_three_point_algorithm]]

---
Level: L5
Date: 2025-08-15
Tags: #nll #borrow-checker #lifetimes #data-flow